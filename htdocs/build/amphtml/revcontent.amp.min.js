/**
 * Revcontent - AMPHTML Network Service
 * @date - Tue Nov 29 2016 09:52:43 GMT-0500 (EST)
 * @version v1.1.0
 * @link http://labs.revcontent.com
 */
!function(window,factory){"use strict";window.RevcontentAMP=factory(window,document)}(window,function(window,document){"use strict";var RevAMP=function(){var self=this;self.data=window.data,self.defaultHost="trends.revcontent.com",self.isSecure=void 0===self.data.ssl||"true"==self.data.ssl,self.serveProtocol=self.isSecure===!0?"https://":"http://",self.serveHost=void 0!==self.data.endpoint?self.data.endpoint:self.defaultHost,self.serveScript="/serve.js.php",self.serveUrl=null,self.forceWidth=void 0!==self.data.width?self.data.width:void 0,self.defaultWrapperId="rcjsload_2ff711",self.viewportWidth=self.forceWidth||window.outerWidth||document.documentElement.clientWidth,self.rcjsload=null,self.rcel=null,self.serveParameters=null,self.testing=void 0!==self.data.testing,self.useAutoSizer=void 0===self.data.sizer||"true"==self.data.sizer,self.isObserving=!1,self.ENTITY_ID="rev2-wid-"+self.data.id.toString(),self.api={enabled:void 0!==self.data.api,key:void 0!==self.data.key?self.data.key:"3eeb00d786e9a77bbd630595ae0be7e9aa7aff3b",endpoint:void 0!==self.data.labs?self.data.labs:"https://trends.revcontent.com/api/v1/",publisher:void 0!==self.data.publisher?self.data.publisher:945,widget:self.data.id,domain:void 0!==self.data.domain?self.data.domain:"apiexamples.powr.com",testing:self.testing,branding:void 0===self.data.branding||"true"==self.data.branding,dimensions:{rows:isNaN(self.data.rows)?4:self.data.rows,cols:isNaN(self.data.cols)?1:self.data.cols},useJSONP:!0,JSONPCallbackName:"revcontentAds",JSONPCallback:"",ads:{size:{width:isNaN(self.data.adxw)?239:self.data.adxw,height:isNaN(self.data.adxh)?274:self.data.adxh}},cssOverrides:void 0!==self.data.css&&self.data.css.length>0?self.data.css:""},self.timeouts={resize:0}};RevAMP.prototype.createWrapper=function(){var self=this;return self.rcjsload=document.createElement("div"),self.rcjsload.id=self.getWrapperId(),document.body.appendChild(self.rcjsload),self},RevAMP.prototype.getWrapperId=function(){var self=this;return void 0!==self.data.wrapper?self.data.wrapper:self.defaultWrapperId},RevAMP.prototype.createScript=function(){var self=this;if(!self.api.enabled){self.rcel=document.createElement("script"),self.rcel.id="rc_"+Math.floor(1e3*Math.random()),self.rcel.type="text/javascript",self.serveParameters="?"+(self.testing===!0?"uitm=1&":"")+"w="+self.data.id+"&t="+self.rcel.id+"&c="+(new Date).getTime()+"&width="+(self.forceWidth||self.viewportWidth),self.serveUrl=self.serveProtocol+self.serveHost+self.serveScript+self.serveParameters,self.rcel.src=self.serveUrl,self.rcel.async=!1;var rcds=document.getElementById(self.rcjsload.id);return rcds.appendChild(self.rcel),self}},RevAMP.prototype.startObservingIntersection=function(){var self=this;return self.isObserving=!0,self.stopObservingIntersection=window.context.observeIntersection(function(changes){changes.forEach(function(c){0==c.intersectionRatio&&self.adjustHeight()})}),self},RevAMP.prototype.renderStart=function(timeout){var self=this;return timeout&&!isNaN(timeout)||(timeout=3e3),window.context.renderStart(),self.useAutoSizer&&(self.adjustHeight(),window.addEventListener("resize",function(event){self.isObserving||self.startObservingIntersection()}),window.addEventListener("orientationchage",function(event){var orientationHandler=function(e){self.startObservingIntersection(),window.removeEventListener("resize",orientationHandler)};window.addEventListener("resize",orientationHandler)})),self},RevAMP.prototype.adjustHeight=function(specificHeight){var self=this,providerHeight=0;self.widgetEl=document.getElementById(self.getWrapperId()),self.providerEl=self.widgetEl.querySelector(".rc-branding"),self.providerEl&&self.providerEl.length>0&&self.providerEl.classList.contains("rc-text-bottom")&&(providerHeight=self.providerEl.clientHeight);var frameHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);return self.widgetEl.offsetHeight>0&&frameHeight>self.widgetEl.offsetHeight&&(frameHeight=self.widgetEl.offsetHeight),window.context.requestResize(document.clientWidth,isNaN(specificHeight)?Math.max(50,providerHeight+frameHeight):specificHeight),window.context.onResizeDenied(function(){}),window.context.onResizeSuccess(function(){document.body.classList.remove("resize-denied"),document.body.classList.add("resize-success"),self.stopObservingIntersection(),self.isObserving=!1}),self},RevAMP.prototype.noContentAvailable=function(){var self=this;return setTimeout(function(){"object"!=typeof RevContentLoader&&(self.stopObservingIntersection(),self.isObserving=!1,window.context.noContentAvailable())},12e4),self},RevAMP.prototype.init=function(){var self=this;return self.createWrapper(),self.createScript(),self.renderStart(3e3),self.fetchAds(),self.noContentAvailable(),window.context.reportRenderedEntityIdentifier(self.ENTITY_ID),self.startObservingIntersection(),self},RevAMP.prototype.fetchAds=function(){var self=this;if(self.api.enabled&&self.validateApiSettings())if(self.api.parameters=[],self.api.parameters.push("api_key="+self.api.key),self.api.parameters.push("pub_id="+self.api.publisher),self.api.parameters.push("widget_id="+self.api.widget),self.api.parameters.push("domain="+self.api.domain),self.api.parameters.push("sponsored_count="+self.api.dimensions.rows*self.api.dimensions.cols+"&internal_count=0&img_h="+self.api.ads.size.height+"&img_w="+self.api.ads.size.width+"&api_source=amp"),self.api.useJSONP){self.api.JSONPCallback=self.api.JSONPCallbackName?self.api.JSONPCallbackName:"success"+self.getTimestamp(),window[self.api.JSONPCallback]=function(ads){self.renderNative(ads)},self.ApiJSONScript=document.createElement("script"),self.ApiJSONScript.type="text/javascript",self.ApiJSONScript.async=!1,self.ApiJSONScript.src=self.api.endpoint+"?"+self.api.parameters.join("&")+"&callback="+self.api.JSONPCallback;var rcds=document.getElementById(self.rcjsload.id);rcds.appendChild(self.ApiJSONScript)}else self.api.request=new XMLHttpRequest,self.api.request.open("GET",self.api.endpoint+"?"+self.api.parameters.join("&"),!0),self.api.request.onload=function(){if(self.api.request.status>=200&&self.api.request.status<400)try{self.renderNative(JSON.parse(self.api.request.responseText))}catch(e){}},self.api.request.onerror=function(){self.apiError()},self.api.request.send();return self},RevAMP.prototype.validateApiSettings=function(){var errs=[],isValid=!1;return 0==errs.length&&(isValid=!0),isValid},RevAMP.prototype.renderNative=function(ads){var self=this;self.createAMPDocument();var adPanel='<div class="rc-amp-panel rc-amp-panel-'+self.data.id+'"></div>',adRow='<div class="rc-amp-row" data-rows="'+self.api.dimensions.rows+'" data-cols="'+self.api.dimensions.cols+'"></div>';self.rcjsload.insertAdjacentHTML("beforeend",adRow);var adMarkup="";self.rcjsload.insertAdjacentHTML("beforeend",adPanel),self.rcjsload.querySelector(".rc-amp-panel").insertAdjacentHTML("beforeend",adRow);for(var a=0;a<ads.length;a++)adMarkup='<div class="rc-amp-ad-item"><div class="rc-amp-ad-wrapper">',adMarkup+='<a href="'+ads[a].url+'" class="rc-cta" target="_blank">',adMarkup+=self.generateAMPImage(ads[a].image,self.api.ads.size.width,self.api.ads.size.height,ads[a].headline,"responsive"),adMarkup+='<h2 class="rc-headline">'+ads[a].headline+"</h2>",adMarkup+=self.api.branding?'<span class="rc-brand-label">'+ads[a].brand+"</span>":"",adMarkup+="</a>",adMarkup+="</div></div>",self.rcjsload.querySelector(".rc-amp-row").insertAdjacentHTML("beforeend",adMarkup);return self.rcjsload.querySelector(".rc-amp-row").insertAdjacentHTML("beforeend",'<div style="clear:both">&nbsp;</div>'),self.adjustHeight(self.widgetEl.offsetHeight),self},RevAMP.prototype.generateAMPImage=function(src,width,height,alt,layout){if(layout||(layout=responsive),src&&0!=src.length)return'<amp-img class="rc-img" alt="'+alt+'" src="'+src+'" width="'+width+'" height="'+height+'" layout="responsive"></amp-img>'},RevAMP.prototype.createAMPDocument=function(){var self=this;return self.createAMPStyles(),self},RevAMP.prototype.createAMPStyles=function(){var self=this;self.styles=document.createElement("style"),self.styles.setAttribute("amp-custom","");var cssBaseStyles="",cssStyles=cssBaseStyles+' /* inject:css */.rc-cta,.rc-cta:hover{text-decoration:none}.rc-amp-ad-item,.rc-cta,.rc-headline{font-family:Roboto,sans-serif}@font-face{font-family:Roboto;src:url(https://fonts.googleapis.com/css?family=Roboto)}body{margin:0;padding:0}.rc-cta{outline:0;color:#000}.rc-amp-ad-item{margin-bottom:10px}.rc-headline{font-size:16px;margin:4px 0;padding:0;font-weight:700}.rc-brand-label{font-size:10px;color:#777;text-align:left;clear:both;display:block}@media screen and (min-width:568px){.rc-amp-row[data-rows="2"] .rc-amp-ad-item{width:50%;float:left}.rc-amp-row[data-rows="3"] .rc-amp-ad-item{width:33.3333333333%;float:left}.rc-amp-row[data-rows="4"] .rc-amp-ad-item{width:25%;float:left}.rc-amp-row .rc-amp-ad-item .rc-amp-ad-wrapper{padding:0 10px}.rc-amp-ad-item{margin-bottom:0}.rc-headline{font-family:Roboto,sans-serif;font-size:13px}}/* endinject */';return cssStyles+="   "+self.api.cssOverrides.toString(),self.styles.insertAdjacentHTML("afterbegin",cssStyles),document.head.appendChild(self.styles),self},RevAMP.prototype.apiError=function(){},RevAMP.prototype.getTimestamp=function(){var time=Date.now||function(){return+new Date};return time()};var RevcontentNetwork=new RevAMP;return document.onreadystatechange=function(){"complete"===document.readyState&&RevcontentNetwork.init()},RevcontentNetwork});