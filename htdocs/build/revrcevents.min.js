/**
 * rc-events - Revcontent Events API
 * @date - Thu Jul 12 2018 16:31:23 GMT-0700 (PDT)
 * @version v0.1.0
 * @link http://revcontent.com
 */
(function(){!function(e,t){return"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?void define([],function(){return e.TimeMe=t()}):e.TimeMe=t()}(this,function(){var e={startStopTimes:{},idleTimeoutMs:6e4,currentIdleTimeMs:0,checkStateRateMs:250,active:!1,idle:!1,currentPageName:"default-page-name",timeElapsedCallbacks:[],userLeftCallbacks:[],userReturnCallbacks:[],startTimer:function(){var t=e.currentPageName;if(void 0===e.startStopTimes[t])e.startStopTimes[t]=[];else{var n=e.startStopTimes[t],i=n[n.length-1];if(void 0!==i&&void 0===i.stopTime)return}e.startStopTimes[t].push({startTime:new Date,stopTime:void 0}),e.active=!0},stopTimer:function(){var t=e.currentPageName,n=e.startStopTimes[t];void 0!==n&&0!==n.length&&(void 0===n[n.length-1].stopTime&&(n[n.length-1].stopTime=new Date),e.active=!1)},getTimeOnCurrentPageInSeconds:function(){return e.getTimeOnPageInSeconds(e.currentPageName)},getTimeOnPageInSeconds:function(t){var n=e.getTimeOnPageInMilliseconds(t);return void 0===n?void 0:e.getTimeOnPageInMilliseconds(t)/1e3},getTimeOnCurrentPageInMilliseconds:function(){return e.getTimeOnPageInMilliseconds(e.currentPageName)},getTimeOnPageInMilliseconds:function(t){var n=0,i=e.startStopTimes[t];if(void 0!==i){for(var r=0,o=0;o<i.length;o++){var s=i[o].startTime,a=i[o].stopTime;void 0===a&&(a=new Date);var c=a-s;r+=c}return n=Number(r)}},getTimeOnAllPagesInSeconds:function(){for(var t=[],n=Object.keys(e.startStopTimes),i=0;i<n.length;i++){var r=n[i],o=e.getTimeOnPageInSeconds(r);t.push({pageName:r,timeOnPage:o})}return t},setIdleDurationInSeconds:function(t){var n=parseFloat(t);if(isNaN(n)!==!1)throw{name:"InvalidDurationException",message:"An invalid duration time ("+t+") was provided."};return e.idleTimeoutMs=1e3*t,this},setCurrentPageName:function(t){return e.currentPageName=t,this},resetRecordedPageTime:function(t){delete e.startStopTimes[t]},resetAllRecordedPageTimes:function(){for(var t=Object.keys(e.startStopTimes),n=0;n<t.length;n++)e.resetRecordedPageTime(t[n])},resetIdleCountdown:function(){e.idle&&e.triggerUserHasReturned(),e.idle=!1,e.currentIdleTimeMs=0},callWhenUserLeaves:function(e,t){this.userLeftCallbacks.push({callback:e,numberOfTimesToInvoke:t})},callWhenUserReturns:function(e,t){this.userReturnCallbacks.push({callback:e,numberOfTimesToInvoke:t})},triggerUserHasReturned:function(){if(!e.active)for(var t=0;t<this.userReturnCallbacks.length;t++){var n=this.userReturnCallbacks[t],i=n.numberOfTimesToInvoke;(isNaN(i)||void 0===i||i>0)&&(n.numberOfTimesToInvoke-=1,n.callback())}e.startTimer()},triggerUserHasLeftPage:function(){if(e.active)for(var t=0;t<this.userLeftCallbacks.length;t++){var n=this.userLeftCallbacks[t],i=n.numberOfTimesToInvoke;(isNaN(i)||void 0===i||i>0)&&(n.numberOfTimesToInvoke-=1,n.callback())}e.stopTimer()},callAfterTimeElapsedInSeconds:function(t,n){e.timeElapsedCallbacks.push({timeInSeconds:t,callback:n,pending:!0})},checkState:function(){for(var t=0;t<e.timeElapsedCallbacks.length;t++)e.timeElapsedCallbacks[t].pending&&e.getTimeOnCurrentPageInSeconds()>e.timeElapsedCallbacks[t].timeInSeconds&&(e.timeElapsedCallbacks[t].callback(),e.timeElapsedCallbacks[t].pending=!1);e.idle===!1&&e.currentIdleTimeMs>e.idleTimeoutMs?(e.idle=!0,e.triggerUserHasLeftPage()):e.currentIdleTimeMs+=e.checkStateRateMs},visibilityChangeEventName:void 0,hiddenPropName:void 0,listenForVisibilityEvents:function(){"undefined"!=typeof document.hidden?(e.hiddenPropName="hidden",e.visibilityChangeEventName="visibilitychange"):"undefined"!=typeof doc.mozHidden?(e.hiddenPropName="mozHidden",e.visibilityChangeEventName="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(e.hiddenPropName="msHidden",e.visibilityChangeEventName="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hiddenPropName="webkitHidden",e.visibilityChangeEventName="webkitvisibilitychange"),document.addEventListener(e.visibilityChangeEventName,function(){document[e.hiddenPropName]?e.triggerUserHasLeftPage():e.triggerUserHasReturned()},!1),window.addEventListener("blur",function(){e.triggerUserHasLeftPage()}),window.addEventListener("focus",function(){e.triggerUserHasReturned()}),document.addEventListener("mousemove",function(){e.resetIdleCountdown()}),document.addEventListener("keyup",function(){e.resetIdleCountdown()}),document.addEventListener("touchstart",function(){e.resetIdleCountdown()}),window.addEventListener("scroll",function(){e.resetIdleCountdown()}),setInterval(function(){e.checkState()},e.checkStateRateMs)},websocket:void 0,websocketHost:void 0,setUpWebsocket:function(t){if(window.WebSocket&&t){var n=t.websocketHost;try{e.websocket=new WebSocket(n),window.onbeforeunload=function(n){e.sendCurrentTime(t.appId)},e.websocket.onopen=function(){e.sendInitWsRequest(t.appId)},e.websocket.onerror=function(e){console&&console.log("Error occurred in websocket connection: "+e)},e.websocket.onmessage=function(e){console&&console.log(e.data)}}catch(i){console&&console.error("Failed to connect to websocket host.  Error:"+i)}}return this},websocketSend:function(t){e.websocket.send(JSON.stringify(t))},sendCurrentTime:function(t){var n=e.getTimeOnCurrentPageInMilliseconds(),i={type:"INSERT_TIME",appId:t,timeOnPageMs:n,pageName:e.currentPageName};e.websocketSend(i)},sendInitWsRequest:function(t){var n={type:"INIT",appId:t};e.websocketSend(n)},initialize:function(t){var n=e.idleTimeoutMs||30,i=e.currentPageName||"default-page-name",r=void 0;t&&(n=t.idleTimeoutInSeconds||n,i=t.currentPageName||i,r=t.websocktOptions),e.setIdleDurationInSeconds(n).setCurrentPageName(i).setUpWebsocket(r).listenForVisibilityEvents(),e.startTimer()}};return e})}).call(this),function(e,t){"use strict";e.revUtils=t(e,e.revOverlay)}(window,function(e,t){"use strict";var n={};return n.deprecateOptions=function(e){return e.overlay&&(e.image_overlay=e.overlay),e.overlay_icons&&(e.image_overlay_icons=e.overlay_icons),e.overlay_position&&(e.image_overlay_position=e.overlay_position),e},n.validateApiParams=function(e){var t=[];if(e.api_key||t.push("api_key"),e.rev_position){var n=["top_right","bottom_left","bottom_right"];this.inArray(n,e.rev_position)<0&&t.push("rev_position")}return e.pub_id||t.push("pub_id"),e.widget_id||t.push("widget_id"),e.domain||t.push("domain"),t.length&&console.log(t),t},n.serialize=function(e,t){if(!e)return"";var n=[];for(var i in e)if(e.hasOwnProperty(i)){var r=t?t+"["+i+"]":i,o=e[i];n.push("object"==typeof o&&"[object Object]"==Object.prototype.toString.call(o)?this.serialize(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o))}return n.join("&")},n.appendStyle=function(e,t,n){var t=t+"-append-style";if(!document.getElementById(t)){var i=document.createElement("style");i.type="text/css",i.id=t,i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i)}if(n&&"string"==typeof n){var r=t+"-extra",o=document.getElementById(r);if(o)o.innerHTML+=n;else{var i=document.createElement("style");i.type="text/css",i.id=r,i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i)}}},n.extend=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)"object"==typeof t[i]&&"[object Object]"==Object.prototype.toString.call(t[i])?n[i]=this.extend(n[i],t[i]):n[i]=t[i];return n},n.merge=function(e,t){for(var n in t)e[n]=t[n];return e},n.inArray=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.setCookie=function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString(),o="; path=/; domain="+top.location.host;document.cookie=e+"="+t+"; "+r+o},n.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},n.getUrlParam=function(e,t){t||(t=top.location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",i=new RegExp(n),r=i.exec(t);return null==r?null:r[1]},n.prepend=function(e,t){e.insertBefore(t,e.firstChild)},n.append=function(e,t){e.appendChild(t)},n.remove=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},n.wrap=function(e,t){e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t.appendChild(e)},n.next=function(e){function t(e){do e=e.nextSibling;while(e&&1!==e.nodeType);return e}return e.nextElementSibling||t(e)},n.hasClass=function(e,t){return!!e&&(e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className))},n.addClass=function(e,t){return!!e&&void(e.classList?e.classList.add(t):(this.removeClass(e,t),e.className+=" "+t))},n.removeClass=function(e,t,n){if(!e)return!1;var i=e.className.trim().split(" ").filter(function(e){return n?0!==e.lastIndexOf(t,0):e!==t});e.className=i.join(" ").trim()},n.dispatchScrollbarResizeEvent=function(){var t="rc-scrollbar-resize-listener-frame";if(!document.getElementById(t)){var n=document.createElement("iframe");n.id=t,n.style.cssText="height: 0; background-color: transparent; margin: 0; padding: 0; overflow: hidden; border-width: 0; position: absolute; width: 100%;";var i=this;n.onload=function(){var t=function(){try{if(Event.prototype.initEvent){var r=document.createEvent("UIEvents");r.initUIEvent("resize",!0,!1,e,0)}else var r=new UIEvent("resize");e.dispatchEvent(r),i.removeEventListener(n.contentWindow,"resize",t)}catch(o){}};i.addEventListener(n.contentWindow,"resize",t)},document.body.appendChild(n)}},n.addEventListener=function(e,t,n,i){if(n){var r=!1;if(this.eventListenerPassiveSupported())var r={passive:!i||"undefined"==typeof i.passive||i.passive};e.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,function(){n.call(e)})}},n.eventListenerPassiveSupported=function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(t){}return e},n.removeEventListener=function(e,t,n){n&&(e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n))},n.transformCss=function(e,t){e.style.transform=t,e.style.MsTransform=t,e.style.WebkitTransform=t,e.style.OTransform=t},n.transitionCss=function(e,t){e.style.transition=t,e.style.MsTransition=t,e.style.WebkitTransition=t,e.style.OTransition=t},n.transitionDurationCss=function(e,t){e.style.transitionDuration=t,e.style.WebkitTransitionDuration=t,e.style.MozTransitionDuration=t,e.style.OTransitionDuration=t},n.ellipsisText=function(e){for(var t=0;t<e.length;t++)for(var n,i=e[t],r=i.children[0];i.clientHeight<(i.scrollHeight>i.clientHeight?i.scrollHeight-1:i.scrollHeight)&&(n=r.innerHTML.trim(),!(n.split(" ").length<=1));)r.innerHTML=n.replace(/\W*\s(\S)*$/,"...")},n.imagesLoaded=function(e,t){function i(e){this.img=e}e.length||t.emitEvent("imagesLoaded");var r=4e3;i.prototype=new EventEmitter,i.prototype.check=function(){var e=this.getIsImageComplete();if(e){var t=this;return void setTimeout(function(){t.confirm(0!==t.img.naturalWidth,"naturalWidth")})}this.proxyImage=new Image,n.addEventListener(this.proxyImage,"load",this),n.addEventListener(this.proxyImage,"error",this),n.addEventListener(this.img,"load",this),n.addEventListener(this.img,"error",this),this.proxyImage.src=this.img.src},i.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("progress",this,this.img,t)},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){n.removeEventListener(this.proxyImage,"load",this),n.removeEventListener(this.proxyImage,"error",this),n.removeEventListener(this.img,"load",this),n.removeEventListener(this.img,"error",this)};for(var o=0,s=0;s<e.length;s++){var a=new i(e[s]);a.once("progress",function(){o++,o==e.length&&t.emitEvent("imagesLoaded")}),a.check()}setTimeout(function(){t.emitEvent("imagesLoaded")},r)},n.getComputedStyle=function(e,t,n){return"undefined"!==getComputedStyle?getComputedStyle(e,n).getPropertyValue(t):e.currentStyle[t]},n.setImage=function(e,t){var n=document.createElement("img");n.src=t,this.append(e,n)},n.mergeOverlayIcons=function(e){this.merge(t.icons,e)},n.imageOverlay=function(e,n,i,r){t.image(e,n,i,r)},n.adOverlay=function(e,n,i,r){t.ad(e,n,i,r)},n.checkVisible=function(t,n,i,r){var o=this;requestAnimationFrame(function(){var s="number"==typeof i?.01*parseInt(i):0,a="number"==typeof r?r:0,c=e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=e.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,u=t.getBoundingClientRect().top,l=t.getBoundingClientRect().bottom,m=t.offsetHeight*s;d+c>=u+d+m-a&&l>m&&n.call(o)})},n.checkVisibleItem=function(t,n,i,r,o){var s=this;requestAnimationFrame(function(){if(o&&o.offsetHeight<=t.element.offsetTop-o.scrollTop)return void n.call(s,!1,t);var a="number"==typeof i?.01*parseInt(i):0,c="number"==typeof r?r:0,d=e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=e.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,l=t.element.getBoundingClientRect().top,m=t.element.getBoundingClientRect().bottom,f=t.element.offsetHeight*a,p=o?u+d-(o.getBoundingClientRect().top+u+o.offsetHeight):0;u+d>=l+u+f-c+(p>0?p:0)&&m>f?n.call(s,!0,t):n.call(s,!1,t)})},n.windowHeight=function(){return e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},n.windowWidth=function(){return document.documentElement.clientWidth||document.body.clientWidth},n.checkHidden=function(t,n,i,r){var o=this;requestAnimationFrame(function(){var s="number"==typeof i?.01*parseInt(i):0,a=e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=e.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;(c+a<t.getBoundingClientRect().top+c||r!==!1&&t.getBoundingClientRect().top+t.offsetHeight*s<=0)&&n.call(o)})},n.imagesAbove=function(e){for(var t=document.querySelectorAll("img"),n=e.getBoundingClientRect().top,i=[],r=0;r<t.length;r++)t[r].getBoundingClientRect().top<n&&i.push(t[r]);return i},n.throttle=function(e,t,n){t||(t=250);var i,r;return function(){var o=n||this,s=+new Date,a=arguments;i&&s<i+t?(clearTimeout(r),r=setTimeout(function(){i=s,e.apply(o,a)},t)):(i=s,e.apply(o,a))}},n.siblingIndex=function(e){if(!e)return!1;for(var t=0;null!=(e=e.previousSibling);)t++;return t},n.storeUserOptions=function(e){var t=this;t.userOptions=e},n.retrieveUserOptions=function(){var e=this;return e.userOptions},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.docReady=function(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&e()})},n.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},n.extractRootDomain=function(e){if(!e)return"";var t;t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0],t=t.split("?")[0];var n=t.split("."),i=n.length;return i>2&&(t=n[i-2]+"."+n[i-1]),t},n.validateEmail=function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())},n}),function(e,t){"use strict";e.revApi=t(e,e.revBeacon)}(window,function(e,t){"use strict";var n={};return n.beacons=t||{attach:function(){}},n.forceJSONP=!0,n.request=function(t,n,i,r){if(this.forceJSONP||e.XDomainRequest){r=r?r:this.generateCallback(),e[r]=n;var o=document.createElement("script");o.src=t+this.getReferer()+"&callback="+r,document.body.appendChild(o)}else this.xhr(t,n,i)},n.xhr=function(e,t,n,i){var r=new XMLHttpRequest;i&&(r.withCredentials=!0),r.open("GET",e+this.getReferer(),!0),r.onload=function(){if(r.status>=200&&r.status<400)try{t(JSON.parse(r.responseText))}catch(e){}else n&&n(r)},r.onerror=function(){n&&n(r)},r.send()},n.getReferer=function(){var e="";try{if(e=document.referrer,"undefined"==typeof e)throw"undefined"}catch(t){e=document.location.href,(""==e||"undefined"==typeof e)&&(e=document.URL)}return e=encodeURIComponent(e.substr(0,700)),"&referer="+e},n.getTimestamp=function(){var e=Date.now||function(){return+new Date};return+e()},n.generateCallback=function(e,t){var n=(void 0!==e&&isNaN(e)&&e.length>2?e:"success")+this.getTimestamp()+"_"+this.createEntropy(isNaN(t)?1e3:t);return n},n.createEntropy=function(e){var t=Math.floor(Math.random()*(isNaN(e)?1e3:e));return t},n}),function(e,t){"use strict";e.revEvents=t(e,e.revApi,e.revUtils,e.TimeMe),e.rceInit=function(t,n){var i=e.revEvents.init(t,n);return i.trackActivity(),i},e.rceTrack=function(t,n){return e.revEvents.track(t,n)},e.addEventListener("beforeunload",function(){e.revEvents.trackActivity()})}(window,function(e,t,n,i){"use strict";var r={ENDPOINT:"//trends.revcontent.com/api/v1/events/track.php",USER_ID:""};return r.init=function(e,t){return this.USER_ID=e,t&&(this.ENDPOINT=t),this},r.track=function(e,i){var r=n.getUrlParam("rc_click");!i.click_uuid&&r&&(i.click_uuid=r),t.request(this.ENDPOINT+"?u="+encodeURIComponent(this.USER_ID)+"&e="+encodeURIComponent(e)+"&p="+encodeURIComponent(btoa(JSON.stringify(i))),function(e){},function(e){})},r.trackActivity=function(){this.track("user_activity",{active_time:i.getTimeOnCurrentPageInSeconds()})},i.initialize({currentPageName:"rc-event",idleTimeoutInSeconds:30}),e.setInterval(function(){r.trackActivity()},3e5),r});